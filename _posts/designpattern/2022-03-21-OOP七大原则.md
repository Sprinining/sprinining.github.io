---
title: OOP七大原则
date: 2022-03-21 03:35:24 +0800
categories: [design pattern]
tags: [Design Pattern, OOP]
description: 单一职责原则、开闭原则、里氏替换原则、接口隔离原则、依赖倒转原则、合成复用原则和迪米特法则。
---
![5-201123151944949](/assets/media/pictures/designpattern/设计模式.assets/5-201123151944949-16310048574411.png)

![v2-1acb8bad5b376dcd35bf71f9d65f1fb6_r](/assets/media/pictures/designpattern/设计模式.assets/v2-1acb8bad5b376dcd35bf71f9d65f1fb6_r.jpg)

## OOP七大原则

### 开闭原则

抽象约束、封装变化。对扩展开放，对修改关闭。

- 通过“抽象约束、封装变化”来实现开闭原则，即通过接口或者抽象类为软件实体定义一个相对稳定的抽象层，而将相同的可变因素封装在相同的具体实现类中。

### 里氏替换原则

子类可以扩展父类的功能，但不能改变父类原有的功能，尽量不要重写父类的方法。

- 子类可以实现父类的抽象方法，但不能覆盖父类的非抽象方法
- 子类中可以增加自己特有的方法
- 当子类的方法重载父类的方法时，方法的前置条件（即方法的输入参数）要比父类的方法更宽松
- 当子类的方法实现父类的方法时（重写/重载或实现抽象方法），方法的后置条件（即方法的的输出/返回值）要比父类的方法更严格或相等

### 依赖倒置原则

面向接口编程而不是面向实现编程，通过要面向接口的编程来降低类间的耦合性。

- 每个类尽量提供接口或抽象类，或者两者都具备。
- 变量的声明类型尽量是接口或者是抽象类。
- 任何类都不应该从具体类派生。
- 使用继承时尽量遵循里氏替换原则。
- ![3-1Q113131610L7](/assets/media/pictures/designpattern/设计模式.assets/3-1Q113131610L7.gif)

### 单一职责原则

控制类的粒度大小，将对象解耦、提高内聚性。

- 接口尽量小，但是要有限度。一个接口只服务于一个子模块或业务逻辑。
- 为依赖接口的类定制服务。只提供调用者需要的方法，屏蔽不需要的方法。
- 了解环境，拒绝盲从。每个项目或产品都有选定的环境因素，环境不同，接口拆分的标准就不同深入了解业务逻辑。
- 提高内聚，减少对外交互。使接口用最少的方法去完成最多的事情。

- 接口隔离原则和单一职责都是为了提高类的内聚性、降低它们之间的耦合性，体现了封装的思想，但两者是不同的：
  - 单一职责原则注重的是职责，而接口隔离原则注重的是对接口依赖的隔离。
  - 单一职责原则主要是约束类，它针对的是程序中的实现和细节；接口隔离原则主要约束接口，主要针对抽象和程序整体框架的构建。

### 接口隔离原则

为各个类建立他们需要的专用接口

- 接口尽量小，但是要有限度。一个接口只服务于一个子模块或业务逻辑。
- 为依赖接口的类定制服务。只提供调用者需要的方法，屏蔽不需要的方法。
- 了解环境，拒绝盲从。每个项目或产品都有选定的环境因素，环境不同，接口拆分的标准就不同深入了解业务逻辑。
- 提高内聚，减少对外交互。使接口用最少的方法去完成最多的事情。

### 迪米特法则

只与你的直接朋友交谈，不和陌生人说话

- 在类的划分上，应该创建弱耦合的类。类与类之间的耦合越弱，就越有利于实现可复用的目标。
- 在类的结构设计上，尽量降低类成员的访问权限。
- 在类的设计上，优先考虑将一个类设置成不变类。
- 在对其他类的引用上，将引用其他对象的次数降到最低。
- 不暴露类的属性成员，而应该提供相应的访问器（set 和 get 方法）。
- 谨慎使用序列化（Serializable）功能。

### 合成复用原则

尽量先使用组合或者聚合等关联关系来实现，其次考虑使用继承关系实现

- 合成复用原则是通过将已有的对象纳入新对象中，作为新对象的成员对象来实现的，新对象可以调用已有对象的功能，从而达到复用。

### 总结

| 设计原则     | 一句话归纳                                                           | 目的                                       |
| ------------ | -------------------------------------------------------------------- | ------------------------------------------ |
| 开闭原则     | 对扩展开放，对修改关闭                                               | 降低维护带来的新风险                       |
| 依赖倒置原则 | 高层不应该依赖低层，要面向接口编程                                   | 更利于代码结构的升级扩展                   |
| 单一职责原则 | 一个类只干一件事，实现类要单一                                       | 便于理解，提高代码的可读性                 |
| 接口隔离原则 | 一个接口只干一件事，接口要精简单一                                   | 功能解耦，高聚合、低耦合                   |
| 迪米特法则   | 不该知道的不要知道，一个类应该保持对其它对象最少的了解，降低耦合度   | 只和朋友交流，不和陌生人说话，减少代码臃肿 |
| 里氏替换原则 | 不要破坏继承体系，子类重写方法功能发生改变，不应该影响父类方法的含义 | 防止继承泛滥                               |
| 合成复用原则 | 尽量使用组合或者聚合关系实现代码复用，少使用继承                     | 降低代码耦合                               |
