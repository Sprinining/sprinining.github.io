---
title: C++è®¿é—®æ§åˆ¶ä¸ç»§æ‰¿
date: 2025-06-17 18:30:08 +0800
categories: [cpp, cpp advanced]
tags: [CPP]
description: "C++è®¿é—®æ§åˆ¶ï¼ˆpublic/protected/privateï¼‰å†³å®šæˆå‘˜è®¿é—®æƒé™ï¼›ç»§æ‰¿æ–¹å¼å½±å“åŸºæˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­çš„å¯è§æ€§ï¼Œæ§åˆ¶è®¿é—®èŒƒå›´å’Œé‡ç”¨æœºåˆ¶ã€‚"
---
##  C++ è®¿é—®æ§åˆ¶ä¸ç»§æ‰¿

### è®¿é—®æ§åˆ¶ï¼ˆAccess Controlï¼‰

C++ æä¾›ä¸‰ç§è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ï¼Œç”¨äºæ§åˆ¶ç±»æˆå‘˜ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰çš„å¯è§æ€§ï¼š

| è®¿é—®æ§åˆ¶ç¬¦  | ç±»å†…éƒ¨ | æ´¾ç”Ÿç±» | å¤–éƒ¨ä»£ç  |
| ----------- | ------ | ------ | -------- |
| `public`    | âœ…      | âœ…      | âœ…        |
| `protected` | âœ…      | âœ…      | âŒ        |
| `private`   | âœ…      | âŒ      | âŒ        |

```cpp
class Base {
public:
    int publicVar;        // ä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®
protected:
    int protectedVar;     // åªèƒ½åœ¨ Base å’Œæ´¾ç”Ÿç±»ä¸­è®¿é—®
private:
    int privateVar;       // åªèƒ½åœ¨ Base å†…éƒ¨è®¿é—®
};
```

### ç»§æ‰¿ï¼ˆInheritanceï¼‰

C++ æ”¯æŒä¸‰ç§ç»§æ‰¿æ–¹å¼ï¼š

| ç»§æ‰¿æ–¹å¼         | åŸºç±» public æˆå‘˜ | åŸºç±» protected æˆå‘˜ | åŸºç±» private æˆå‘˜ |
| ---------------- | ---------------- | ------------------- | ----------------- |
| `public` ç»§æ‰¿    | public           | protected           | ä¸å¯è®¿é—®          |
| `protected` ç»§æ‰¿ | protected        | protected           | ä¸å¯è®¿é—®          |
| `private` ç»§æ‰¿   | private          | private             | ä¸å¯è®¿é—®          |

### æ´¾ç”Ÿç±»æ„é€ å‡½æ•°ä¸­ä½¿ç”¨åŸºç±»çš„æ„é€ å‡½æ•°

#### **æ˜¾å¼åœ¨æ´¾ç”Ÿç±»æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°**ï¼ˆæœ€å¸¸ç”¨ï¼‰

```cpp
struct Base {
    Base(int x) { std::cout << "Base(" << x << ")\n"; }
};

struct Derived : Base {
    Derived(int x) : Base(x) {  // æ˜¾å¼è°ƒç”¨ Base çš„æ„é€ å‡½æ•°
        std::cout << "Derived(" << x << ")\n";
    }
};
```

#### **ä½¿ç”¨ `using Base::Base;` ç»§æ‰¿æ„é€ å‡½æ•°**ï¼ˆC++11 èµ·ï¼‰

```cpp
struct Base {
    Base(int x) { std::cout << "Base(" << x << ")\n"; }
};

struct Derived : Base {
    using Base::Base;  // ç»§æ‰¿æ„é€ å‡½æ•°
    // ç°åœ¨ Derived(int x) è‡ªåŠ¨å­˜åœ¨ï¼Œç­‰æ•ˆäºè°ƒç”¨ Base(x)
};
```

è¿™ä¼šè®© `Derived` è‡ªåŠ¨æ‹¥æœ‰ä¸ `Base` æ„é€ å‡½æ•°ç›¸åŒçš„æ„é€ å‡½æ•°ï¼ˆåˆæˆå½¢å¼ï¼‰ï¼Œä¾‹å¦‚ï¼š

```cpp
Derived d(10);  // å®é™…è°ƒç”¨çš„æ˜¯ Base(10)
```

æ­¤æ—¶æ´¾ç”Ÿç±»è‡ªå·±çš„æˆå‘˜å˜é‡ **ä¼šæŒ‰æ­£å¸¸è§„åˆ™åˆå§‹åŒ–**ï¼š

- å¦‚æœç»™æˆå‘˜å˜é‡æä¾›äº†é»˜è®¤åˆå§‹å€¼ï¼ˆC++11 èµ·æ”¯æŒï¼‰ï¼Œå®ƒä¼šè¢«ä½¿ç”¨ã€‚
- å¦åˆ™å°±æ˜¯é»˜è®¤æ„é€ ï¼ˆ`T{}`ï¼‰æˆ–æœªåˆå§‹åŒ–ï¼ˆPOD ç±»å‹å¦‚ `int`ï¼‰çš„çŠ¶æ€ã€‚

| ç‰¹æ€§                                 | è¯´æ˜                           |
| ------------------------------------ | ------------------------------ |
| è‡ªåŠ¨ç»§æ‰¿æ„é€ å‡½æ•°                     | æ— éœ€æ˜¾å¼å†™æ„é€ å‡½æ•°             |
| ä¸ä¼šç»§æ‰¿æ‹·è´/ç§»åŠ¨æ„é€ ã€ææ„å‡½æ•°      | ä»éœ€è‡ªå®šä¹‰æˆ–é»˜è®¤ç”Ÿæˆ           |
| ä¸ä¼šç»§æ‰¿æ„é€ å‡½æ•°ä½“ä¸­çš„é€»è¾‘           | è‹¥è¦é™„åŠ é€»è¾‘ä»éœ€è‡ªå·±å†™æ„é€ å‡½æ•° |
| åŸºç±»æ„é€ å‡½æ•°ä¸º `explicit` ä¹Ÿä¼šè¢«ç»§æ‰¿ | åŒæ ·ä¿ç•™ `explicit`            |

### è®¿é—®æ§åˆ¶ + ä¸‰ç§ç»§æ‰¿æ–¹å¼

```cpp
#include <iostream>
using namespace std;

class Base {
public:
    int a = 1;                    // public æˆå‘˜
protected:
    int b = 2;                    // protected æˆå‘˜
private:
    int c = 3;                    // private æˆå‘˜ï¼ˆæ´¾ç”Ÿç±»ä¸å¯è§ï¼‰

public:
    void showPublic() { cout << "Base::showPublic" << endl; }
protected:
    void showProtected() { cout << "Base::showProtected" << endl; }
private:
    void showPrivate() { cout << "Base::showPrivate" << endl; }
};

//------------------ 1. public ç»§æ‰¿ ------------------
class PublicDerived : public Base {
public:
    void accessMembers() {
        cout << "PublicDerived access:\n";
        cout << a << endl;           // âœ… OKï¼Œä»æ˜¯ public
        cout << b << endl;           // âœ… OKï¼Œä»æ˜¯ protected
        // cout << c << endl;       // âŒ ç¼–è¯‘é”™è¯¯ï¼Œc æ˜¯ privateï¼Œæ´¾ç”Ÿç±»ä¸å¯è§

        showPublic();                // âœ… OK
        showProtected();            // âœ… OK
        // showPrivate();           // âŒ ç¼–è¯‘é”™è¯¯
    }
};

//------------------ 2. protected ç»§æ‰¿ ------------------
class ProtectedDerived : protected Base {
public:
    void accessMembers() {
        cout << "ProtectedDerived access:\n";
        cout << a << endl;           // âœ… OKï¼Œa æˆä¸º protected
        cout << b << endl;           // âœ… OKï¼Œb ä¿æŒ protected
        // cout << c << endl;       // âŒ ç¼–è¯‘é”™è¯¯

        showPublic();                // âœ… OKï¼Œå˜ä¸º protected
        showProtected();            // âœ… OK
        // showPrivate();           // âŒ ç¼–è¯‘é”™è¯¯
    }
};

//------------------ 3. private ç»§æ‰¿ ------------------
class PrivateDerived : private Base {
public:
    void accessMembers() {
        cout << "PrivateDerived access:\n";
        cout << a << endl;           // âœ… OKï¼Œa æˆä¸º private
        cout << b << endl;           // âœ… OKï¼Œb æˆä¸º private
        // cout << c << endl;       // âŒ ç¼–è¯‘é”™è¯¯

        showPublic();                // âœ… OKï¼Œå˜ä¸º private
        showProtected();            // âœ… OK
        // showPrivate();           // âŒ ç¼–è¯‘é”™è¯¯
    }
};

int main() {
    PublicDerived pd;
    pd.accessMembers();
    cout << pd.a << endl;           // âœ… OKï¼Œpublic ç»§æ‰¿ä¿ç•™ a ä¸º public
    // cout << pd.b << endl;       // âŒ ç¼–è¯‘é”™è¯¯ï¼Œb æ˜¯ protected
    // cout << pd.c << endl;       // âŒ ç¼–è¯‘é”™è¯¯

    pd.showPublic();                // âœ… OK
    // pd.showProtected();         // âŒ ç¼–è¯‘é”™è¯¯
    // pd.showPrivate();           // âŒ ç¼–è¯‘é”™è¯¯

    ProtectedDerived prot;
    prot.accessMembers();
    // cout << prot.a << endl;     // âŒ ç¼–è¯‘é”™è¯¯ï¼ša æ˜¯ protected
    // prot.showPublic();          // âŒ ç¼–è¯‘é”™è¯¯

    PrivateDerived priv;
    priv.accessMembers();
    // cout << priv.a << endl;     // âŒ ç¼–è¯‘é”™è¯¯ï¼ša æ˜¯ private
    // priv.showPublic();          // âŒ ç¼–è¯‘é”™è¯¯
}
```

ç»§æ‰¿æ–¹å¼å¹¶ä¸å½±å“æ´¾ç”Ÿç±»å¯¹åŸºç±»çš„è®¿é—®æƒé™ï¼š

- **æ´¾ç”Ÿç±»å†…éƒ¨èƒ½è®¿é—®ä»€ä¹ˆï¼Œå–å†³äºåŸºç±»ä¸­æˆå‘˜çš„è®¿é—®ä¿®é¥°ç¬¦ï¼š**

  - `public` å’Œ `protected` æˆå‘˜ï¼šæ´¾ç”Ÿç±»éƒ½å¯ä»¥è®¿é—®

  - `private` æˆå‘˜ï¼šæ´¾ç”Ÿç±»æ°¸è¿œæ— æ³•è®¿é—®ï¼ˆé™¤éæ˜¯å‹å…ƒï¼‰

- **ç»§æ‰¿æ–¹å¼ï¼ˆpublic / protected / privateï¼‰å½±å“çš„æ˜¯**ï¼š
  - æ´¾ç”Ÿç±»**ç»§æ‰¿ä¸‹æ¥**çš„æˆå‘˜ï¼Œåœ¨â€œæ´¾ç”Ÿç±»çš„å¯¹è±¡â€è¢«â€œç±»å¤–éƒ¨â€è®¿é—®æ—¶ï¼Œæ˜¾ç¤ºä»€ä¹ˆæƒé™ã€‚

### å‹å…ƒï¼ˆFriendï¼‰ä¸è®¿é—®æ§åˆ¶

- `friend` å¯ä»¥ç»•è¿‡è®¿é—®æ§åˆ¶ï¼Œç”¨äºç±»ã€å‡½æ•°ã€æˆå‘˜å‡½æ•°ç­‰å£°æ˜ä¸ºå‹å…ƒï¼Œå…·æœ‰è®¿é—®ç§æœ‰/ä¿æŠ¤æˆå‘˜çš„æƒé™ã€‚

#### ç¤ºä¾‹ 1

- æ´¾ç”Ÿç±»çš„æˆå‘˜æˆ–è€…å‹å…ƒ**åªèƒ½é€šè¿‡æ´¾ç”Ÿç±»å¯¹è±¡**æ¥è®¿é—®åŸºç±»çš„å—ä¿æŠ¤æˆå‘˜ã€‚
- æ´¾ç”Ÿç±»å¯¹äºä¸€ä¸ªåŸºç±»å¯¹è±¡ä¸­çš„å—ä¿æŠ¤æˆå‘˜æ²¡æœ‰ä»»ä½•è®¿é—®ç‰¹æƒã€‚

```cpp
#include <iostream>
using namespace std;

class Base {
protected:
    int prot_mem = 42;
};

class Sneaky : public Base {
    friend void clobber(Sneaky&);
    friend void clobber(Base&);
    int j;

public:
    void accessMyOwnProtMem() {
        prot_mem = 100;  // âœ… OKï¼šè®¿é—®è‡ªå·±ç»§æ‰¿çš„ protected æˆå‘˜
        cout << "Sneaky::accessMyOwnProtMem: " << prot_mem << endl;
    }

    void tryAccessBaseProtMem(Base& b) {
        // b.prot_mem = 999;  // âŒ é”™è¯¯ï¼šæ— æ³•è®¿é—® Base ç±»å‹å¯¹è±¡çš„ protected æˆå‘˜
        cout << "Sneaky::tryAccessBaseProtMem: æ— æ³•è®¿é—® b.prot_memï¼ˆä¼šç¼–è¯‘å¤±è´¥ï¼‰" << endl;
    }
};

void clobber(Sneaky& s) {
    s.prot_mem = 200;  // âœ… OKï¼šSneaky çš„å‹å…ƒï¼Œå¯ä»¥è®¿é—® s ä¸­ç»§æ‰¿çš„ prot_mem
    cout << "clobber(Sneaky&): " << s.prot_mem << endl;
}

void clobber(Base& b) {
    // b.prot_mem = 300;  // âŒ é”™è¯¯ï¼šä¸æ˜¯ Base çš„å‹å…ƒï¼Œä¸èƒ½è®¿é—® Base å¯¹è±¡çš„ protected æˆå‘˜
    cout << "clobber(Base&): æ— æ³•è®¿é—® b.prot_memï¼ˆä¼šç¼–è¯‘å¤±è´¥ï¼‰" << endl;
}

int main() {
    Sneaky s;
    Base b;

    s.accessMyOwnProtMem();     // âœ… åˆæ³•
    s.tryAccessBaseProtMem(b); // âŒ éæ³•è®¿é—®ï¼Œæ³¨é‡Šæ‰é‚£ä¸€è¡Œæ‰èƒ½ç¼–è¯‘é€šè¿‡

    clobber(s);  // âœ… åˆæ³•
    clobber(b);  // âŒ è‹¥è®¿é—® b.prot_memï¼Œä¼šç¼–è¯‘å¤±è´¥
}
```

| å¯¹è±¡ç±»å‹           | æ´¾ç”Ÿç±»ä¸­èƒ½è®¿é—®åŸºç±» protected æˆå‘˜ï¼Ÿ | åŸå› è¯´æ˜                                                  |
| ------------------ | ----------------------------------- | --------------------------------------------------------- |
| è‡ªå·± (`this`)      | âœ… å¯ä»¥                              | ç»§æ‰¿è€Œæ¥ï¼Œå±äºæ´¾ç”Ÿç±»                                      |
| å…¶ä»–æ´¾ç”Ÿç±»å¯¹è±¡     | âœ… å¯ä»¥                              | åŒä¸€ç±»å†…éƒ¨ï¼Œprotected å¯è®¿é—®                              |
| åŸºç±»å¯¹è±¡ (`Base&`) | âŒ ä¸å¯ä»¥                            | ä¸ç®¡ä½ æ˜¯å­ç±»è¿˜æ˜¯å‹å…ƒï¼Œéƒ½ä¸èƒ½è®¿é—®åŸºç±»å¯¹è±¡çš„ protected æˆå‘˜ |

#### ç¤ºä¾‹ 2

```cpp
class Base {
    // å£°æ˜ Pal ä¸º Base çš„å‹å…ƒç±»ï¼ŒPal å¯ä»¥è®¿é—® Base çš„ç§æœ‰å’Œä¿æŠ¤æˆå‘˜
    friend class Pal;
protected:
    int prot_mem; // å—ä¿æŠ¤æˆå‘˜ï¼Œæ´¾ç”Ÿç±»å¯ä»¥è®¿é—®ï¼Œå¤–éƒ¨ç±»ä¸èƒ½è®¿é—®ï¼Œé™¤éæ˜¯å‹å…ƒ
};

class Sneaky : public Base {
    // Sneaky ç»§æ‰¿è‡ª Baseï¼Œå› æ­¤åŒ…å«ä¸€ä¸ª Base çš„å­å¯¹è±¡ï¼ŒåŒ…å« prot_mem
    // ä½† j æ˜¯ Sneaky è‡ªå·±çš„ç§æœ‰æˆå‘˜ï¼Œå¤–éƒ¨ä¸èƒ½è®¿é—®ï¼Œé™¤éæ˜¯ Sneaky çš„å‹å…ƒ
    int j;
};

class Pal {
public:
    // âœ… åˆæ³•ï¼šPal æ˜¯ Base çš„å‹å…ƒç±»ï¼Œå¯ä»¥è®¿é—® Base çš„ protected æˆå‘˜
    int f(Base b) { 
        return b.prot_mem; // åˆæ³•è®¿é—® Base å¯¹è±¡ä¸­çš„ prot_mem
    }

    // âŒ éæ³•ï¼šè™½ç„¶ Sneaky æ˜¯ Base çš„æ´¾ç”Ÿç±»ï¼Œä½† j æ˜¯ Sneaky çš„ç§æœ‰æˆå‘˜
    // Pal ä¸æ˜¯ Sneaky çš„å‹å…ƒç±»ï¼Œå› æ­¤ä¸èƒ½è®¿é—® s.j
    // int f2(Sneaky s) { return s.j; };

    // âœ… åˆæ³•ï¼šPal æ˜¯ Base çš„å‹å…ƒç±»
    // è™½ç„¶ s æ˜¯ Sneaky ç±»å‹ï¼Œä½†å®ƒå†…éƒ¨æœ‰ä¸€ä¸ª Base å­å¯¹è±¡
    // Pal å¯ä»¥è®¿é—®è¿™ä¸ª Base å­å¯¹è±¡ä¸­çš„ prot_mem æˆå‘˜
    int f3(Sneaky s) { 
        return s.prot_mem; // åˆæ³•è®¿é—® Base çš„ protected æˆå‘˜
    }
};
```

- **å‹å…ƒæƒé™æ˜¯æŒ‰å£°æ˜æ‰€åœ¨ç±»å†³å®šçš„ï¼Œå’Œå¯¹è±¡çš„é™æ€ç±»å‹æ— å…³**ã€‚
-  å¦‚æœä½ æ˜¯ `Base` çš„ friendï¼Œä½ å°±èƒ½è®¿é—®â€œä»»ä½•å¯¹è±¡ä¸­çš„ Base æˆå‘˜â€ï¼Œ**ä¸è®ºé‚£ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯ Derived ç±»å‹**ã€‚

å†é€šä¿—ä¸€ç‚¹ï¼š

å‡è®¾ä½ æ˜¯ä¸ªå°å·ï¼ˆfriendï¼‰ï¼Œä½ åªä¼šæ’¬å¼€ `Base` ç‰Œçš„ä¿é™©ç®±ï¼ˆä½ ä¸æ˜¯ `Derived` çš„å°å·ï¼‰ï¼Œé‚£ä½ å¯ä»¥å¯¹ä»»ä½•â€œæœ‰è£… Base ä¿é™©ç®±â€çš„ç®±å­ï¼ˆDerived å¯¹è±¡ï¼‰ï¼Œé€šè¿‡â€œBase çš„æ–¹å¼â€æ‰“å¼€å®ƒï¼Œä½†ä½ **ä¸èƒ½ç”¨ Derived çš„é’¥åŒ™æ‰“å¼€ Derived çš„ç§äººç©ºé—´ï¼ˆprivate æˆå‘˜ï¼‰**ã€‚

### C++ å‡½æ•°è°ƒç”¨çš„è§£æè¿‡ç¨‹

#### é™æ€ç±»å‹ vs. åŠ¨æ€ç±»å‹

- **é™æ€ç±»å‹**ï¼šå˜é‡å£°æ˜æ—¶çš„ç±»å‹ï¼Œæ˜¯ç¼–è¯‘æ—¶ç¡®å®šçš„ã€‚
- **åŠ¨æ€ç±»å‹**ï¼šå¯¹è±¡å®é™…çš„ç±»å‹ï¼Œæ˜¯è¿è¡Œæ—¶æ‰ç¡®å®šçš„ï¼ˆå¤šæ€ç›¸å…³ï¼‰ã€‚

å‡½æ•°è°ƒç”¨æ—¶ï¼š

- **åå­—æŸ¥æ‰¾å’Œé‡è½½å†³è®®éƒ½æ˜¯åŸºäºé™æ€ç±»å‹å®Œæˆçš„**ï¼Œåœ¨ç¼–è¯‘æœŸå®Œæˆã€‚
- **è™šå‡½æ•°è°ƒç”¨çš„å®é™…è°ƒç”¨ç‰ˆæœ¬**æ ¹æ®åŠ¨æ€ç±»å‹ï¼Œåœ¨è¿è¡Œæ—¶ç»‘å®šã€‚

#### å‡½æ•°è°ƒç”¨çš„æ•´ä½“è¿‡ç¨‹

å‡è®¾æœ‰ä¸€æ¡æˆå‘˜å‡½æ•°è°ƒç”¨ï¼š

```cpp
expr.f(args);
```

è§£æè¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š

##### 1. ç¡®å®šé™æ€ç±»å‹

- å…ˆç¡®å®š `expr` çš„é™æ€ç±»å‹ï¼ˆå˜é‡å£°æ˜æ—¶çš„ç±»å‹ï¼‰ã€‚
- åªæ ¹æ®é™æ€ç±»å‹å»æŸ¥æ‰¾æˆå‘˜å‡½æ•° `f`ã€‚

##### 2. åå­—æŸ¥æ‰¾ï¼ˆName Lookupï¼‰

- åœ¨é™æ€ç±»å‹å¯¹åº”çš„ç±»åŠå…¶åŸºç±»ä¸­æŸ¥æ‰¾åä¸º `f` çš„æˆå‘˜å‡½æ•°ã€‚
- æŸ¥æ‰¾æ—¶éµå¾ªä½œç”¨åŸŸè§„åˆ™ï¼šå…ˆæŸ¥æ‰¾æ´¾ç”Ÿç±»ï¼Œå†å‘åŸºç±»æŸ¥æ‰¾ã€‚
- å¦‚æœæ´¾ç”Ÿç±»ä¸­æœ‰åŒåæˆå‘˜ï¼Œä¼šéšè—åŸºç±»ä¸­æ‰€æœ‰åŒåæˆå‘˜ï¼ˆä¸è®ºç­¾åï¼‰ã€‚

##### 3. é‡è½½è§£æï¼ˆOverload Resolutionï¼‰

- ç¼–è¯‘å™¨æ ¹æ®è°ƒç”¨å‚æ•° `args` çš„ç±»å‹ï¼Œä»æŸ¥æ‰¾åˆ°çš„å€™é€‰å‡½æ•°ä¸­é€‰æ‹©æœ€ä½³åŒ¹é…ã€‚
- å€™é€‰å‡½æ•°é›†åˆåªåŒ…å«åå­—æŸ¥æ‰¾åˆ°çš„æˆå‘˜ï¼ˆå—éšè—è§„åˆ™é™åˆ¶ï¼‰ã€‚
- å¦‚æœæ‰¾ä¸åˆ°åˆé€‚çš„åŒ¹é…ï¼Œç¼–è¯‘é”™è¯¯ã€‚

##### 4. è®¿é—®æ§åˆ¶æ£€æŸ¥

- æ£€æŸ¥é€‰ä¸­çš„æˆå‘˜å‡½æ•°æ˜¯å¦å¯¹å½“å‰è°ƒç”¨ç‚¹å¯è®¿é—®ï¼ˆpublic/protected/privateï¼‰ã€‚
- ä¸å¯è®¿é—®åˆ™ç¼–è¯‘é”™è¯¯ã€‚

##### 5. ç»‘å®šè°ƒç”¨

- **å¦‚æœå‡½æ•°æ˜¯éè™šå‡½æ•°**ï¼Œç›´æ¥ç»‘å®šé™æ€ç±»å‹å¯¹åº”çš„å‡½æ•°å®ç°ã€‚
- **å¦‚æœå‡½æ•°æ˜¯è™šå‡½æ•°**ï¼Œè¿è¡Œæ—¶æ ¹æ®å¯¹è±¡åŠ¨æ€ç±»å‹æŸ¥æ‰¾å…·ä½“é‡å†™ç‰ˆæœ¬ï¼ˆåŠ¨æ€ç»‘å®šï¼‰ã€‚

#### é‡è¦è¯´æ˜

- åå­—æŸ¥æ‰¾å’Œé‡è½½è§£æå…¨éƒ¨åœ¨ç¼–è¯‘æœŸå®Œæˆï¼Œ**åªç”¨é™æ€ç±»å‹ä¿¡æ¯**ï¼Œä¸ä¾èµ–åŠ¨æ€ç±»å‹ã€‚
- åŠ¨æ€ç±»å‹åªå½±å“è™šå‡½æ•°çš„å…·ä½“è°ƒç”¨ç‰ˆæœ¬é€‰æ‹©ã€‚
- æ´¾ç”Ÿç±»ä¸­å®šä¹‰äº†åŒåå‡½æ•°åï¼ŒåŸºç±»ä¸­æ‰€æœ‰åŒåå‡½æ•°å‡è¢«éšè—ï¼Œå¿…é¡»ç”¨ `using` æ˜¾å¼å¯¼å…¥ã€‚

#### ç¤ºä¾‹ 1

```cpp
#include <iostream>
using namespace std;

class Base {
public:
    void f(int) { cout << "Base::f(int)" << endl; }
    void f(double) { cout << "Base::f(double)" << endl; }
    virtual void v() { cout << "Base::v()" << endl; }
};

class Derived : public Base {
public:
    void f(int) { cout << "Derived::f(int)" << endl; }
    void v() override { cout << "Derived::v()" << endl; }
};

int main() {
    Derived d;
    Base* pb = &d;

    d.f(10);    // è°ƒç”¨ Derived::f(int)
    // d.f(3.14); // é”™è¯¯ï¼ŒBase::f(double) è¢«éšè—
    d.f(3.14);  // å¦‚æœæ·»åŠ  using Base::f; åœ¨ Derived å†…ï¼Œè°ƒç”¨ Base::f(double)

    pb->v();    // è¿è¡Œæ—¶è°ƒç”¨ Derived::v()ï¼Œè™šå‡½æ•°åŠ¨æ€ç»‘å®š

    return 0;
}
```

#### ç¤ºä¾‹ 2

```cpp
#include <iostream>
using namespace std;

class Base {
public:
	virtual int fcn();  // è™šå‡½æ•°ï¼ŒåŸºç±»ç‰ˆæœ¬ï¼Œå¯è¢«æ´¾ç”Ÿç±»è¦†ç›–
};

class D1 : public Base {
public:
	// ç»§æ‰¿äº† Base::fcn() çš„å®šä¹‰ï¼ˆæœªè¦†ç›–ï¼‰

	int fcn(int);       // é‡è½½ï¼Œä¸æ˜¯è¦†ç›–ã€‚åå­—ç›¸åŒï¼Œä½†å‚æ•°ä¸åŒï¼Œéšè— Base::fcn()
	virtual void f2();  // æ–°å¢è™šå‡½æ•°
};

class D2 : public D1 {
public:
	int fcn(int);       // é‡è½½ D1::fcn(int)ï¼Œéšè—äº† D1::fcn(int)
	int fcn() override; // è¦†ç›– Base::fcn()
	void f2() override; // è¦†ç›– D1::f2()
};

// å‡½æ•°å®šä¹‰ï¼š
int Base::fcn() {
	cout << "Base::fcn()" << endl;
	return 0;
}
int D1::fcn(int) {
	cout << "D1::fcn(int)" << endl;
	return 1;
}
void D1::f2() {
	cout << "D1::f2()" << endl;
}
int D2::fcn(int) {
	cout << "D2::fcn(int)" << endl;
	return 2;
}
int D2::fcn() {
	cout << "D2::fcn()" << endl;
	return 3;
}
void D2::f2() {
	cout << "D2::f2()" << endl;
}

int main() {
	Base bobj;
	D1 d1obj;
	D2 d2obj;

	// d1obj.fcn();  // é”™è¯¯ï¼šæ²¡æœ‰åŒ¹é…çš„ fcn()ï¼Œå› ä¸º D1::fcn(int) éšè—äº† Base::fcn()

	Base* bp1 = &bobj, * bp2 = &d1obj, * bp3 = &d2obj;

	// é™æ€ç±»å‹ Base*ï¼Œè°ƒç”¨ virtual int fcn()
	// è™šå‡½æ•°åŠ¨æ€ç»‘å®šï¼Œæ ¹æ®åŠ¨æ€ç±»å‹ï¼š
	bp1->fcn();   // è°ƒç”¨ Base::fcn()
	bp2->fcn();   // è°ƒç”¨ Base::fcn()ï¼ˆD1 æ²¡æœ‰è¦†ç›–å®ƒï¼‰
	bp3->fcn();   // è°ƒç”¨ D2::fcn()ï¼Œå› ä¸º D2 è¦†ç›–äº† Base::fcn()

	D1* d1p = &d1obj;
	D2* d2p = &d2obj;

	// f2 æ˜¯è™šå‡½æ•°
	// è°ƒç”¨çš„å‡½æ•°ç‰ˆæœ¬æ ¹æ®å¯¹è±¡çš„åŠ¨æ€ç±»å‹ç¡®å®š
	// bp2->f2();    // é”™è¯¯ï¼šBase ä¸­æ²¡æœ‰ f2ï¼Œåå­—æŸ¥æ‰¾é˜¶æ®µå°±å¤±è´¥
	d1p->f2();    // é™æ€ç±»å‹ D1*ï¼Œè°ƒç”¨ D1::f2()
	d2p->f2();    // é™æ€ç±»å‹ D2*ï¼Œè°ƒç”¨ D2::f2()ï¼ˆé‡å†™äº† D1::f2()ï¼‰

	Base* p1 = &d2obj;
	D1* p2 = &d2obj;
	D2* p3 = &d2obj;
	// p1->fcn(2);  // ç¼–è¯‘é”™è¯¯ï¼šBase ä¸­æ²¡æœ‰ fcn(int)ï¼Œåå­—æŸ¥æ‰¾å¤±è´¥
	p2->fcn(2);  // é™æ€ç±»å‹ D1*ï¼Œè°ƒç”¨ D1::fcn(int)ï¼Œéè™šå‡½æ•°
	p3->fcn(2);  // é™æ€ç±»å‹ D2*ï¼Œè°ƒç”¨ D2::fcn(int)ï¼Œéè™šå‡½æ•°

	return 0;
}
```

- æ¯ä¸ªç±»ä¸­å£°æ˜çš„æ–°åŒåå‡½æ•°ä¼š**éšè—æ•´ä¸ªåŸºç±»ä¸­åŒåä½†ä¸åŒç­¾åçš„å‡½æ•°é›†**ï¼ˆåå­—éšè—ï¼‰

å¦‚æœæƒ³æ¢å¤è®¿é—® `Base::fcn()`ï¼Œå°±è¦åŠ ï¼š

```cpp
class D1 : public Base {
public:
    using Base::fcn;     // ğŸ‘ˆ æ˜ç¡®æŠŠ Base::fcn() å¼•å…¥åˆ° D1 çš„ä½œç”¨åŸŸä¸­
    int fcn(int);
    virtual void f2();
};
```

ç„¶åå°±å¯ä»¥åœ¨ `main` é‡Œå†™ï¼š

```cpp
d1obj.fcn();     // è°ƒç”¨ Base::fcn()
d1obj.fcn(10);   // è°ƒç”¨ D1::fcn(int)
```

| ç°è±¡                      | åŸå›                                             |
| ------------------------- | ----------------------------------------------- |
| `d1obj.fcn()` æ— æ³•ç¼–è¯‘    | `D1::fcn(int)` éšè—äº† `Base::fcn()`             |
| éšè—å‘ç”Ÿåœ¨ *åå­—æŸ¥æ‰¾é˜¶æ®µ* | ç¼–è¯‘å™¨åªçœ‹åˆ° `D1` ä¸­çš„ `fcn`ï¼ŒBase çš„ç‰ˆæœ¬è¢«è·³è¿‡ |
| æƒ³æ¢å¤è®¿é—®éšè—çš„å‡½æ•°      | ä½¿ç”¨ `using Base::fcn;` å¼•å…¥åŸºç±»æˆå‘˜            |

#### å°ç»“

| æ­¥éª¤                | è¯´æ˜                               | å¤‡æ³¨                                   |
| ------------------- | ---------------------------------- | -------------------------------------- |
| **1. é™æ€ç±»å‹ç¡®å®š** | ç¡®å®šè°ƒç”¨å¯¹è±¡çš„é™æ€ç±»å‹             | ä¾‹å¦‚`Derived d;`çš„é™æ€ç±»å‹æ˜¯`Derived`  |
| **2. åå­—æŸ¥æ‰¾**     | åœ¨é™æ€ç±»å‹ä½œç”¨åŸŸä¸­æŸ¥æ‰¾å‡½æ•°å       | ä»æ´¾ç”Ÿç±»å¼€å§‹æŸ¥ï¼Œæ´¾ç”Ÿç±»åŒåéšè—åŸºç±»åŒå |
| **3. é‡è½½è§£æ**     | å‚æ•°ç±»å‹åŒ¹é…ç¡®å®šå‡½æ•°               | åªåœ¨æŸ¥æ‰¾åˆ°çš„å€™é€‰ä¸­é€‰æœ€ä½³åŒ¹é…           |
| **4. è®¿é—®æƒé™æ£€æŸ¥** | æ£€æŸ¥è®¿é—®æƒé™                       | private/protected è®¿é—®è§„åˆ™             |
| **5. ç»‘å®šè°ƒç”¨**     | é™æ€å‡½æ•°ç›´æ¥è°ƒç”¨ï¼Œè™šå‡½æ•°è¿è¡Œæ—¶ç»‘å®š | å¤šæ€çš„å…³é”®                             |
